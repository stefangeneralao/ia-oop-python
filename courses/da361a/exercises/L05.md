---
layout: instructions
title: Laboration 5
code: da361a
---

# Laboration 5

## Introduktion

Syftet med laboration 5 칛r att v칛ldigt kort introduceras till det v칛ldigt popul칛ra Python ramverket [Django](https://www.djangoproject.com/). Detta ramverk anv칛nds f칬r att skapa st칬rre webbplatser snabbt och effektivt. Eftersom det vanligtvis anv칛nds f칬r att skapa st칬rre webbplats inneb칛r det ocks친 att det finns en inl칛rningskurva samt att komma ig친ng kr칛vs betydligt mer arbete 칛n att b칬rja med t.ex Flask eller Bottle.

Django inneh친ller mycket funktionalitet redan fr친n b칬rjan vilket inneb칛r att vi kommer beh칬va l칛sa dokumentation, ta del av guider och annat material fr친n webben.

Denna kortare guide kommer att utg친 fr친n version `1.9` av Django. I m친nga fall vad g칛ller material fr친n webben utg친r 칛ven dessa fr친n Python versionen `3` eller mer, dock finns det givetvis st칬d f칬r Python version `2` (men i vissa fall med modifikation f칬r att det ska fungera).

Denna laboration utg친r huvudsakligen fr친n den genomg친ng som [officiellt ges av Django](https://docs.djangoproject.com/en/1.9/intro/tutorial01/) med vissa modifikationer - men denna rekommenderas starkt att ni g친r igenom om ni vill f친 en 칛nnu b칛ttre genomg친ng med vettiga l칛nkar till dokumentation osv.

## 칐vning

Denna 칬vning kommer g친 ut p친 att vi i slut칛ndan kommer skapa en minimal webbplats i form av en Blogg. D칛r vi ska b칬rja med att kunna (1) lista flera inl칛gg och 칛ven kunna (2) bes칬ka ett enskilt inl칛gg.

Ett inl칛gg kommer best친 av:

* Titel
* Datum
* Inneh친ll
* **F칬rfattare**

Ett inl칛gg kan ha en **f칬rfattare** som best친r av:

* Namn
* Email

Relation: *En f칬rfattare kan skriva flera inl칛gg.*

### Installation

F칬r att kunna installera Django kr칛vs det att ni har `pip` installerat (anv칛nds f칬r att installera Pythonmoduler) - [f칬r att installera "pip" kan ni ta en titt h칛r](https://pip.pypa.io/en/stable/installing/).

D칛refter 칛r n칛sta steg att ni 칬ppnar er terminal/kommandotolk och k칬r kommandot:
{% highlight bash linenos %}
$ pip install django
{% endhighlight %}

Nu b칬r f칬rhoppningsvis Django vara installerat!

### Ett f칬rsta projekt

F칬r att skapa v친rt lilla projekt b칬r ni nu i er terminal/kommandotolk placerar er i n친gon mapp (f칬r denna laborationen) och d칛refter k칬ra kommandot:

{% highlight bash linenos %}
$ django-admin startproject labb5
{% endhighlight %}

Ni kan givetvis byta ut `labb5` till vad ni k칛nner 칛r passande.

Om allt fungerade som det ska b칬r ni ha en mappstruktur likt detta:

{% highlight bash linenos %}
labb5/
    manage.py
    labb5/
        __init__.py
        settings.py
        urls.py
        wsgi.py
{% endhighlight %}

Kort beskrivning 칬ver dessa filer:

* Den 칬versta `labb5` 칛r rootmappen f칬r hela projektet, spelar ingen st칬rre roll vad denna heter
* Filen `manage.py` m칬jligg칬r m친nga kommandon genom terminalen/kommandotolken
* Den andra `labb5` 칛r den mapp som representerar v친rt Pythonprojekt
* Filen `labb5/__init__.py` 칛r en tom fil som anv칛nds av Python f칬r att kunna m칬jligg칬ra importering av andra filer
* `labb5/settings.py` inneh친ller konfiguration f칬r v친r webbplats
* `labb5/urls.py` inneh친ller de URL:er vi beh칬ver f칬r v친r webbplats
* `labb5/wsgi.py` ing친ngsfil f칬r WSGI- webbservrar (bry er inte om denna)

Vi kan testa att allt fungerar som det ska genom att starta v친r webbserver:

{% highlight bash linenos %}
$ python manage.py runserver
{% endhighlight %}

Jag f친r f칬ljande meddelande:

{% highlight bash linenos %}
Performing system checks...

System check identified no issues (0 silenced).

You have unapplied migrations; your app may not work properly until they are applied.
Run 'python manage.py migrate' to apply them.

January 14, 2016 - 14:30:12
Django version 1.9.1, using settings 'labb5.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
{% endhighlight %}

Bry er inte om felmeddelandet "You have unapplied migrations; [...]"
{: .info}

Pr칬va nu att bes칬ka adressen `http://127.0.0.1:8000/` - om det fungerar som det ska b칬r ni f친 ett meddelande med "It worked!".

Vill ni 칛ndra HTTP-port som webbservern k칬rs p친 kan ni 칛ndra kommandot till f칬ljande:

{% highlight bash linenos %}
$ python manage.py runserver 8080
{% endhighlight %}

T칛nk 칛ven p친 att i framtiden beh칬ver vi starta om webbservern om vi gjort 칛ndringar i v친ra Pythonfiler f칬r att dessa ska g칛lla
{: .info}

### Blogg

Nu 칛r det dags att st칛nga av din webbserver, s친 vi senare kan starta den igen med v친ra 칛ndringar, detta g칬rs oftast med `ctrl-c`
{: .info}

N칛sta steg 칛r att vi ska skapa grunden f칬r v친r webbapplikation, en blogg. V칛rt att notera 칛r att i ett Django projekt (som t.ex labb5) kan vi ha flera webbapplikationer - s친 vi t.ex kan gruppera olika webbappliaktioner inom samma projekt om vi vill.

F칬r att skapa v친r webbapplikation k칬r vi f칬ljande kommando:

{% highlight bash linenos %}
$ python manage.py startapp blogg
{% endhighlight %}

Om det fungerade s친 b칬r ni ha f칬ljande mappstruktur i mappen `blogg`:

{% highlight bash linenos %}
blogg/
    __init__.py
    admin.py
    apps.py
    migrations/
        __init__.py
    models.py
    tests.py
    views.py
{% endhighlight %}

F칬r att g칬ra s친 att vi kan bes칬ka v친r bloggs startsida (utan inneh친ll dock) beh칬ver vi g칬ra ett par steg. Det f칬rsta 칛r att best칛mma vad som ska visas n칛r vi bes칬ker v친r blogg, som i detta fallet kommer vara p친 adressen `http://127.0.0.1:8000/blogg`.

칐ppna filen `blogg/views.py` med valfri textredigerare och l칛gg till f칬ljande (bry er inte om att det redan finns lite Pythonkod):

{% highlight python linenos %}
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello World from our blog!")
{% endhighlight %}

F칬r att detta ska kunna kopplas direkt mot adressen `http://127.0.0.1:8000/blogg` beh칬ver vi koppla det mot en URL i Django. Detta g칬rs genom att vi skapar filen `blogg/urls.py` (det 칛r i denna vi kommer best칛mma vilka URL:er som leder vart). I denna filen placerar ni f칬ljande Pythonkod:

{% highlight python linenos %}
from django.conf.urls import url

from . import views

urlpatterns = [
    url(r'^$', views.index, name='index')
]
{% endhighlight %}

Den del som inneh친ller `r'^$'` 칛r allts친 ett minimalt "regular expression", om detta 칛r n친got nytt b칬r ni g칬ra n친gon form av generell Googling p친 termen "regular expression" samt [ta en titt p친 hur det fungerar i Python](https://docs.python.org/2/library/re.html)
{: .info}

Eftersom v친r "blogg" endast 칛r en av eventuellt flera webbapplikationer beh칬ver vi 칛ven tillg칛ngligg칬ra denna i filen `labb5/urls.py`, denna inneh친ller redan Pythonkod, redigera denna s친 att den inneh친ller f칬ljande:

{% highlight python linenos %}
from django.conf.urls import include, url
from django.contrib import admin

urlpatterns = [
    url(r'^blogg/', include('blogg.urls')),
    url(r'^admin/', admin.site.urls),
]
{% endhighlight %}

**Observera** 칛ndringarna p친 rad `1` och `5`.

*Starta om servern om du 칛nnu inte gjort det.*

Nu b칬r du kunna bes칬ka adressen `http://127.0.0.1:8000/blogg`.

### Databas

N칛sta steg 칛r att f칛rdigst칛lla n친gon form av databas som vi sedan kan fylla med inneh친ll (blogginl칛gg) som d칛refter presenteras p친 webben. Django har st칬d f칬r en m칛ngd olika popul칛ra databaser som t.ex MySQL, PostgreSQL, SQLite. I v친rt fall kommer vi utg친 fr친n det som 칛r inkluderat fr친n b칬rjan som inte heller kr칛ver n친gon installation: SQLite, som 칛r en minimal databas som lagras i en textfil.

Olika inst칛llningar som anv칛nds av Django (bla. vilken databas, tidszon, osv.) finner ni i filen `labb5/settings.py` - s친 ta och 칬ppna denna i en textredigerare.

Det f칬rsta vi kan notera 칛r att runt rad ~74 s친 hittar vi information om v친r databas, dvs. vilken typ (engine) och namnet p친 denna - l친t detta vara som det 칛r. N친gra andra saker v칛rt att notera 칛r att v친r tidszon finner ni vid rad ~109 (standard 칛r `UTC`). Slutligen kan ni ta en titt p친 vilken inbyggd funktionalitet (s.k. appar) som 칛r installerade fr친n b칬rjan, detta finner ni vid rad ~33.

N친gra av dessa anv칛nder sig av en databas f칬r att spara viss information, detta inneb칛r att eftersom vi skapat en webbapplikation fr친n grunden beh칬ver tabeller skapas f칬r dessa - k칬r f칬ljande kommando f칬r detta:

{% highlight bash linenos %}
$ python manage.py migrate
{% endhighlight %}

Jag fick f칬ljande meddelande (dvs. OK):

{% highlight bash linenos %}
Operations to perform:
    Apply all migrations: admin, contenttypes, auth, sessions
Running migrations:
    Rendering model states... DONE
    Applying contenttypes.0001_initial... OK
    Applying auth.0001_initial... OK
    Applying admin.0001_initial... OK
    Applying admin.0002_logentry_remove_auto_add... OK
    Applying contenttypes.0002_remove_content_type_name... OK
    Applying auth.0002_alter_permission_name_max_length... OK
    Applying auth.0003_alter_user_email_max_length... OK
    Applying auth.0004_alter_user_username_opts... OK
    Applying auth.0005_alter_user_last_login_null... OK
    Applying auth.0006_require_contenttypes_0002... OK
    Applying auth.0007_alter_validators_add_error_messages... OK
    Applying sessions.0001_initial... OK
{% endhighlight %}

Vad detta kort inneb칛r att kommandot `migrate` kollar i `settings.py` i listan `INSTALLED_APPS` och g칬r d칛refter beslut om vilka tabeller som beh칬vs skapas och dylikt - ganska smidigt!

### Models

Termien "Models" har och g칬ra med att modellera data, i detta fallet 칛r det Pythonklasser med tillh칬rande attribut som anv칛nds. Dessa blir d칛refter automagiskt konverterade till tabeller f칬r den valda databasen och vi f친r d칛rmed gratis funktionalitet f칬r att interagera med v친ra modeller p친 olika vis.

I v친rat fall kommer vi att ha tv친 stycken, dvs. `Post` (f칬r ett inl칛gg) och `Author` (f칬r en f칬rfattare). 칐ppna filen `blogg/models.py` och redigera den s친 att den inneh친ller f칬ljande kod (t칛nk 친terigen p친 att filerna inneh친ller kod fr친n b칬rjan s친 var nogrann):

{% highlight python linenos %}
from django.db import models

class Author(models.Model):
    name = models.CharField(max_length=100)
    email = models.CharField(max_length=100)

class Post(models.Model):
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
    title = models.CharField(max_length=100)
    content = models.TextField()
    created_at = models.DateField()
{% endhighlight %}

F칬rhoppningsvis 칛r ovanst친ende kod inte alltf칬r kr친nglig att tolka. Vi har v친ra tv친 modeller `Author` och `Post`. En f칬rfattare har tv친 attribut: `name` och `email` som b친de 칛r av typen `CHAR` i SQL (kortare texter) med en maxl칛ngd p친 `100` tecken. Ett blogginl칛gg har fyra attribut: `author`, `title`, `content` och `created_at`. H칛r ser vi att en f칬rfattare har en relation till ett inl칛gg, titlar 칛r begr칛nsade till 100 tecken, inneh친ll 칛r av typen `TEXT` (dvs. en st칬rre m칛ngd text) och slutligen har vi ett attribut som representerar n칛r v친rt inl칛gg skapades.

Mer om just [modeller inom Django kan l칛sa h칛r](https://docs.djangoproject.com/en/1.9/topics/db/models/).

Genom att skapa dessa klasser (modellera) s친 f친r vi v칛ldigt mycket funktionalitet gratis. Bland annat kan vi nu enkelt skapa dessa tabeller i v친r databas och d칛refter l칛gga till, ta bort och 칛ndra inneh친ll f칬r dessa.

F칬r att aktivera denna funktionalitet s친 beh칬ver vi redigera filen `labb5/settings.py` och g친 ner till `INSTALLED_APPS` - 칛ndra denna listan till f칬ljande:

{% highlight python linenos %}
INSTALLED_APPS = [
    'blogg.apps.BloggConfig',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]
{% endhighlight %}

D칛refter k칬r vi kommandot:

{% highlight bash linenos %}
$ python manage.py makemigrations blogg
{% endhighlight %}

Detta inneb칛r att vi Django vet att vi inkluderat v친r webbapplikation "blogg" f칬r databasfunktionalitet. Ni b칬r d칛rmed f친 ett meddelande likt detta:

{% highlight bash linenos %}
Migrations for 'blogg':
    0001_initial.py:
        - Create model Author
        - Create model Post
{% endhighlight %}

F칬r att sedan (som vi gjorde tidigare med den inbyggda funktionaliteten) k칬r vi slutligen kommandot:

{% highlight bash linenos %}
$ python manage.py migrate
{% endhighlight %}

Vilket inneb칛r att tabeller osv. skapas 친t oss! Ni b칬r f친 ett meddelande likt detta d친:

{% highlight bash linenos %}
Operations to perform:
    Apply all migrations: admin, contenttypes, blogg, auth, sessions
Running migrations:
    Rendering model states... DONE
    Applying blogg.0001_initial... OK
{% endhighlight %}

Kort kan vi s칛ga att om vi g칬r 칛ndringar i v친ra modeller (`blogg/models.py`) s친 kommer vi beh칬ver k칬ra dessa tv친 kommandon (`makemigrations` och `migrate`) f칬r att v친ra 칛ndringar ska 친terspeglas i Django
{: .info}

### Interagera med databasen

Vi kan med hj칛lp av Django enkelt interagera med v친r databas, vi kan d친 l칛gga till, ta bort eller 칛ndra saker - eller bara se vad som finns i databasen. F칬r att komma ig친ng beh칬ver vi k칬ra f칬ljande kommando (som 칬ppnar en slags Pythontolk 친t oss):

{% highlight bash linenos %}
$ python manage.py shell
{% endhighlight %}

Vi kan b칬rja med att best칛mma att tillsammans l칛gga till en f칬rfattare och ett inl칛gg f칬r denna f칬rfattaren. Detta arbetsfl칬det kan se ut p친 f칬ljande vis:

{% highlight bash linenos %}
# Importera v친ra modeller s친 vi kan nytta dess funktionalitet
>>> from blogg.models import Author, Post

# Kontrollera om det finns n친gra f칬rfattare
>>> Author.objects.all()
[]

# Kontrollera om det finns n친gra inl칛gg
>>> Post.objects.all()
[]

# Skapa v친r f칬rsta f칬rfattare
>>> jane = Author(name='Jane Doe', email='jane@gmail.com')
# Spara f칬rfattaren i databasen
>>> jane.save()
# Kontrollera vilket "id" v친r f칬rfattare fick
>>> jane.id
1

# Nu kan vi se s친 att Jane existerar med r칛tt inneh친ll
>>> jane.name
"Jane Doe"
>>> jane.email
"jane@gmail.com"

# N칛sta (snarlikt) steg 칛r att l칛gga till ett blogginl칛gg
# med Jane som f칬rfattare, innan vi g칬r detta beh칬ver vi lite
# extra funktionalitet i form av att h칛mta dagens datum
>>> from django.utils import timezone
>>> p = Post(author=jane, title='Hi!', content='My first post!', created_at=timezone.now())

# Spara
>>> p.save()
# id?
>>> p.id
1

# Ytterligare information
>>> p.author.name
"Jane Doe"

# Hur ser ett helt inl칛gg ut?
>>> p
<Post: Post Object>

# Har vi sparat allt i databasen?
>>> Post.objects.all()
[<Post: Post Object>]
{% endhighlight %}

F칬r att avsluta kan ni skriva in `exit()` och trycka "enter"
{: .info}

En naturlig 칛ndring vi vill g칬ra 칛r att alla v친ra klasser representeras som n친got vettigare 칛n `<Post: Post Object>` osv. Det inneb칛r att vi beh칬ver g칬ra f칬ljande 칛ndringar i `blogg/models.py`:

{% highlight python linenos %}
from django.db import models
from django.utils.encoding import python_2_unicode_compatible

# H칛r kan ni notera en sak som beh칬vs g칬ras f칬r Python version 2

@python_2_unicode_compatible
class Author(models.Model):
    name = models.CharField(max_length=100)
    email = models.CharField(max_length=100)

    def __str__(self):
        return self.name

@python_2_unicode_compatible
class Post(models.Model):
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
    title = models.CharField(max_length=100)
    content = models.TextField()
    created_at = models.DateField()

    def __str__(self):
        return '{0} ({1})'.format(self.title, self.author.name)
{% endhighlight %}

F칬r att nu pr칬va detta kan ni 친terigen k칬ra kommandot f칬r att interagera med databasen och pr칬va f칬ljande:

{% highlight bash linenos %}
>>> from blogg.models import Author, Post

>>> a = Author.objects.get(id=1)
>>> a
<Author: Jane Doe>

>>> p = Post.objects.get(id=1)
>>> p
<Post: Hi! (Jane Doe)>
{% endhighlight %}

F칬r att snabbt se vad ni mer kan g칬ra med detta [kan ni ta en snabb titt p친 denna delen av den officiella guiden](https://docs.djangoproject.com/en/1.9/intro/tutorial02/#playing-with-the-api).

Vad ni ska g칬ra nu 칛r att l칛gga till:

* Tre stycken nya f칬rfattare med relevant inneh친ll
* Fem stycken blogginl칛gg som ni valfritt kopplar till dessa tre (se till att alla har minst ett inl칛gg)

### Django Admin

Django tillhanda h친ller inte bara funktionalitet genom kod och interaktion med databaser utan 칛ven ett helt f칛rdig "admin gr칛nssnitt". F칬r att anv칛nda oss av detta beh칬ver vi f칬rst och fr칛mst skapa en anv칛ndare (s.k. superuser - den med tillg친ng till allt).

{% highlight bash linenos %}
$ python manage.py createsuperuser
{% endhighlight %}

N칛r ni k칬rt detta kommandot f칬ljer ni de stegen som presenteras och fyller i n친got relevant, t.ex:

{% highlight bash linenos %}
Username: admin
Email address: admin@test.com
Password: ******
Password (again): ******
Superuser created successfully.
{% endhighlight %}

**Tips:** skriv ner era uppgifter s친 ni inte gl칬mmer dessa.

Testa nu att k칬ra ig친n er webbserver igen med `runserver` kommandot sen tidigare, bes칬k d칛refter adressen `http://127.0.0.1:8000/admin/` och logga in med de uppgifter ni precis skapade.

Om allt funkat som de ska b칬r ni f친 ett gr칛nssnitt d칛r ni kan se `Users` och `Groups` vilket 칛r en bra start - vad vi nu vill g칬ra 칛r att kunna administrera v친ra egna modeller (f칬rfattare och blogginl칛gg). Detta inneb칛r att vi beh칬ver registrera v친ra modeller s친 att Django vet att dessa existerar och ska finnas i admin gr칛nsnittet.

칐ppna och redigera filen `blogg/admin.py` och l칛gg till f칬ljande kod:

{% highlight python linenos %}
from django.contrib import admin

from .models import Author, Post

admin.site.register(Author)
admin.site.register(Post)
{% endhighlight %}

**Starta om webbservern** och bes칬k d칛refter adressen `http://127.0.0.1:8000/admin/` igen. Om allt fungerat som det ska b칬r ni nu se `Authors` och `Posts`. Detta inneb칛r att vi nu v칛ldigt enkelt kan l칛gga till, ta bort eller 칛ndra p친 dessa genom ett webbgr칛nssnitt ist칛llet f칬r att anv칛nda en terminal/kommandotolk som innan (...游땍).

### Presentera inneh친ll p친 webben

Avslutningsvis ska vi nu presentera detta inneh친ll vi sparat i databasen p친 webben. Detta kommer kort g칬ras genom att vi best칛mmer att n칛r en bes칬kare, till exempel, bes칬ker `/blogg` s친 h칛mtar vi alla v친ra `Posts` och visar dessa genom HTML. Denna HTML kommer fr친n v친ra vyer (views) i samband med mallar (templates) f칬r hur vyerna ska renderas (dvs. hur v친rt databasinneh친ll ska kopplas med HTML-element osv.).

V친rt f칬rsta steg 칛r att p친 sidan `/blogg` s친 vill vi lista alla v친ra blogginl칛gg (med titel och f칬rfattare) - dessa ska vara ordnade efter datum.

F칬r att g칬ra detta kommer vi beh칬va b칬rja med att redigera filen `blogg/views.py` p친 f칬ljande vis:

{% highlight python linenos %}
# Denna raden kan ni nu radera
# from django.http import HttpResponse

from django.shortcuts import render

from .models import Post

def index(request):
    # Den data som anv칛nds i v친r mall (dvs. HTML)
    context = {
        # Alla v친ra inl칛gg sorterade efter datum
        'all_posts': Post.objects.order_by('created_at')
    }
    return render(request, 'blogg/index.html', context)
{% endhighlight %}

Nu har vi best칛mt vilken data vi vill visa, n칛sta steg 칛r att skapa mallen - dvs. v친r HTML. I ovanst친ende exempel ser vi ocks친 att vi vill anv칛nda oss av `blogg/index.html` - alla v친ra mallar ska placeras i mappen `templates`. S친 n칛sta steg 칛r att skapa denna samt mappen `blogg` och slutligen `index.html` i denna. Det vill s칛ga att vi kommer att ha `blogg/templates/blogg/index.html` i slut칛ndan.

N칛sta steg 칛r att skapa v친r HTML-mall, det kan vi g칬ra p친 f칬ljande vis:

{% highlight html linenos %}
<!doctype html>
<html>
<head>
<title>Blog example</title>
<meta charset="utf-8">
</head>
<body>
    {% raw %}
    {% if all_posts %}
        <ul>
        {% for post in all_posts %}
            <li>
                <a href="/blogg/{{ post.id }}/">
                {{ post.title }} ({{ post.author.name }})
                </a>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No posts are available.</p>
    {% endif %}
    {% endraw %}
</body>
</html>
{% endhighlight %}

Om ni nu bes칬ker er adress `http://127.0.0.1:8000/blogg/` s친 b칬r ni f친 en liten lista 칬ver alla era blogginl칛gg! Notera att inf칬r n칛sta steg har vi f칬rberet genom att vi har l칛nkar `<a>` med en adress som pekar mot, t.ex., `/blogg/1` f칬r f칬rsta inl칛gget osv.

N칛sta steg 칛r att vi ska kunna klicka p친 en av dessa inl칛ggen och f친 hela inl칛ggets inneh친ll samt datumet utskrivet. Vi b칬rjar d칛rmed igen med filen `blogg/views.py` och l칛gger till f칬ljande funktion:

{% highlight python linenos %}
def detail(request, post_id):
    context = {
        'post': Post.objects.get(id=post_id)
    }
    return render(request, 'blogg/post.html', context)
{% endhighlight %}

Eftersom vi nu l칛gger till en ny adress, t.ex. `/blogg/1`, kommer vi d칛rmed beh칬va s칛ga till Django att denna finns tillg칛nglig som en URL. Detta g칬rs i filen `blogg/urls.py` - redigera denna till f칬ljande:

{% highlight python linenos %}
from django.conf.urls import url

from . import views

urlpatterns = [
    url(r'^$', views.index, name='index'),
    url(r'^(?P<post_id>[0-9]+)/$', views.detail, name='detail')
]
{% endhighlight %}

Ovanst친ende 칛ndring (specielt det v친rat "regular expression") kan ses som sv친r men kortfattat inneb칛r det att vi till친ter URL:er som slutar p친 en siffra likt `/blogg/1` och om detta 칛r fallet anropar vi v친r funktion `detail` i `views.py` - som slutligen h칛mtar v친r HTML-mall och visar v친r data. Vilket slutligen leder oss till v친r sista HTML-mall:

{% highlight html linenos %}
<!doctype html>
<html>
<head>
<title>Blog example</title>
<meta charset="utf-8">
</head>
<body>
    {% raw %}
    {% if post %}
        <h1>{{맗ost.title }}</h1>
        <h3>{{맗ost.created_at }} - {{ post.author.name }}</h3>
        <p>{{ post.content }}</p>
    {% else %}
        <p>No post was found.</p>
    {% endif %}
    {% endraw %}
</body>
</html>
{% endhighlight %}

Nu b칬r ni som helhet f친tt en kortare introduktion och f칬rst친else f칬r hur Django fungerar och hur stort det faktiskt 칛r - t칛nk att vad vi gjort h칛r 칛r n친got minimalt men m칛ngden gratis funktionalitet vi f친r hade underl칛ttat ett st칬rre projekt v칛ldigt mycket!

## Uppgift

Nedan listas extra uppgifter som kan utf칬ras.

* Ta reda p친 hur ni kan l칛gga till en 404-sida
* Ta reda p친 hur ni kan l칛gga till en sida med ett formul칛r f칬r att skapa en f칬rfattare
* Ta reda p친 hur ni kan l칛gga till en sida med ett formul칛r f칬r att skapa ett inl칛gg (d칛r vi kan v칛lja f칬rfattare fr친n en dropdown-meny)

**Djupdyk**

* 츿ndra s친 att alla f칬rfattare har ett l칬senord i sen modell
* Ta reda p친 hur ni kan g칬ra s친 att en f칬rfattare m친ste vara inloggad f칬r att skapa ett inl칛gg
* Ta reda p친 hur ni kan g칬ra s친 att en f칬rfattare kan logga in
* Ta reda p친 hur ni kan g칬ra f칬r att n칛r ett inl칛gg skapas s친 blir det av den inloggade f칬rfattaren
